# Monitoring and Alerting

## Overview

The crypto-trackers system includes comprehensive monitoring with Prometheus, Alertmanager, and Grafana to provide visibility into system health and performance.

## Metrics Endpoints

All Go services expose metrics at `/metrics` on port 8080:
- `ma-signal-detector:8080/metrics`
- `volume-spike-detector:8080/metrics` 
- `alert-service:8080/metrics`
- `data-ingestion:80/metrics` (Python service)

## Key Metrics

### Business Metrics
- `price_events_processed_total` - Price events processed by symbol
- `trading_signals_generated_total` - Trading signals generated by symbol and type
- `volume_spikes_detected_total` - Volume spikes detected by symbol
- `alerts_sent_total` - Alerts sent by symbol
- `alerts_rate_limited_total` - Alerts rate limited by symbol
- `alerts_received_total` - Alerts received by symbol and signal type

### System Metrics
- `price_event_processing_seconds` - Processing time histogram
- `volume_processing_seconds` - Volume processing time histogram
- Standard Go runtime metrics (memory, CPU, goroutines)

## Alerts

### Critical Alerts
- **ServiceDown** - Service unavailable for 2+ minutes
- Severity: critical

### Warning Alerts
- **HighErrorRate** - HTTP 5xx error rate > 0.1 req/sec for 5+ minutes
- **NoSignalsGenerated** - No trading signals generated for 15+ minutes
- **KafkaLagHigh** - Consumer lag > 1000 messages for 5+ minutes
- **AlertServiceRateLimiting** - Rate limiting > 0.5 alerts/sec for 10+ minutes
- **PriceEventProcessingLow** - Processing rate < 0.01 events/sec for 10+ minutes
- **MemoryUsageHigh** - Memory usage > 80% for 5+ minutes
- **CPUUsageHigh** - CPU usage > 80% for 10+ minutes

### Info Alerts
- **VolumeSpikesLow** - Less than 1 volume spike detected in 2+ hours

## Dashboards

### Overview Dashboard
- Service health status
- Price events processed rate
- Trading signals generated rate
- Volume spikes detected rate
- Alerts sent vs rate limited
- Processing time distribution

### Detailed Metrics Dashboard
- Memory usage by service
- CPU usage by service
- Signal types distribution
- Processing time by symbol
- Error rates

## Access

- **Prometheus**: `http://prometheus-service:9090`
- **Alertmanager**: `http://alertmanager:9093`
- **Grafana**: `http://grafana:3000` (admin/admin)

## Configuration

Prometheus scrapes metrics every 30 seconds. Alert evaluation runs every 30 seconds. Alertmanager groups alerts by name with 10s wait time and 1h repeat interval.